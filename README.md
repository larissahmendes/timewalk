# Timewalk measurements in the VeloPix ASIC
by Larissa Helena Mendes

This repository holds the project developed during the Reproducibility in Research course at Unicamp. The main purpose was to create an Executable Paper by providing all the necessary elements to reproduce this research. The study of this effect in VeloPix is reported in this work.

The [paper](https://github.com/larissahmendes/timewalk/blob/master/deliver/Timewalk_measurements_in_the_VeloPix_ASIC.pdf) of this research is available in `/deliver` directory. In the `/utils` folder of this repository is made available a document for Best Practices in reproducible research.

## Software implementation

All source code used to generate the results and figures in the paper is in the `code` folder. The data fitting, and histograms and figures generation are all run inside Jupyter notebooks. The data used in this study is available in a Zenodo repository (linked in the data session of this README file) and should be put in the `data` folder. Results generated by the code are saved in `results`. See the `README.md` files in each directory for full descriptions.

### Repository Structure

The files are organized as follow:

- /data - Dataset (original and pre-processed)
- /deliver - Reproducible paper and its figures
- /code - Codes and notebooks used during the experiment
- /results - Outputs of the analysis 
- /utils - Best Practices in reproducible research
- /workflow - Communication flow between the components that involve the entire project
- /environment - Dependencies and environment variables

## Reproducing the results

### 1. Get the code

To download the package source as you see it on GitHub, for offline browsing, use this line at the shell prompt (assuming you have Git installed on your computer):

`git clone git@github.com:larissahmendes/timewalk.git`

or [download a zip archive](https://github.com/larissahmendes/timewalk/archive/master.zip)

### 2. Get the data

The data used in this study is available in a Zenodo repository that can be found HERE. Download the file called `outputfile_negative.root` and put it inside the folder `/data`. 

It is not necessary to download the other files of this repository.

### 3. Set up the environment and run the notebook

The analysis steps will run in a ROOT analysis in a Jupyter notebook environment. It is possible to install all the necessary libraries in your local environment or run the docker container. The instructions to set up the environment and run the notebook are available the [README.md](https://github.com/larissahmendes/timewalk/blob/master/environment/README.md) file in the `/environment` folder.

### 4. Execute the workflow

See a workflow chart with the inputs and outputs of the analysis at [workflow/workflow.png](https://github.com/larissahmendes/timewalk/blob/master/workflow/workflow.png).

The notebooks are divided into cells (some are Markdown texts and other are code). Each cell can be executed using `Shift + Enter`. Executing code cells runs the code and produces the outputs. To execute the entire notebook, run all cells in order. Run the notebooks in the following order:

  1. /code/TW_interpolation.ipynb
  2. /code/TW_fits.ipynb
  3. /code/TW_hists.ipynb

To visualize the results run the cells of the [paper.ipynb](https://github.com/larissahmendes/timewalk/blob/master/code/paper.ipynb) notebook to update the outputs.

## License
All source codes are available under a GNU General Public License v3.0. You can freely use and modify the code, with no warranty. See LICENSE.md for the full license text.
